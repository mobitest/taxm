<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>企业资料</title>
	<link rel="stylesheet"  href="../demos/css/themes/default/jquery.mobile-1.3.1.min.css">
	<link rel="stylesheet" href="../demos/_assets/css/jqm-demos.css">
	<link rel="shortcut icon" href="../demos/favicon.ico">

	<link rel="stylesheet" href="t1-welcome.css">
	<link rel="stylesheet" href="info.css">
	<script src="../demos/js/jquery.js"></script>
	<script src="../demos/_assets/js/index.js"></script>
	<script src="../demos/js/jquery.mobile-1.3.1.min.js"></script>
<!--
        		["d1"/*	基本资料*/	:"TNsrjbxx"   ,	
            "d2"/*	核定信息*/	:"TNsrhdqk"   ,
            "d3"/*	申报情况*/	:"TNsrsbqk"   ,
            "d4"/*	缴税情况*/	:"TNsrnsqk"   ,
            "d5"/*	发票购置*/	:"TNsrfpgzqk" ,
            "d6"/*	社保缴纳*/	:"TSbfjfqk"   ],
-->
	
	<script>

		$(document).ready(function(){
		
			//动态生成页面
			dynamicLoad(2390);
		});
		
		//入口：取数据，并调用页面生成器，生成页面
		function dynamicLoad(id){
				$.ajax({url: "sample-all.json",					
						dataType:"json",
						data:{"id":id},
						success:PageBuilder.do,
						error: function(XMLHttpRequest, textStatus, errorThrown){ 
	            alert('error:'+errorThrown); 
	       		}

					});
				}

				/*页面生成器 BY takeashower*/
			PageBuilder={
				_data:null,
				/*数据*/

				d5pop:function(d){
       	   var head= '<div id="d5" class="datanode gen"> <ul data-role="listview" data-inset="true">'+
       	   '<li data-role="list-divider">发票购置情况</li>'+
       	   
       	   '</ul></div>';
       	  
       	   $('.ui-content').append(head);
       	   var lv = $("#d5.gen>ul");
						var tb_1=
						'<table data-role="table" id="table-column-toggle" data-mode="columntoggle" class="ui-responsive table-stroke">'+
     				"<thead><tr>"+
         		'<th data-priority="6">发票种类</th>'+
         		'<th data-priority="1">发票批次</th>'+
         		'<th data-priority="1">计量单位</th>'+
         		'<th data-priority="2">发票号码起</th>'+
         		'<th data-priority="2">发票号码止</th>'+
         		'<th data-priority="1">数量</th>'+
         		'<th data-priority="3">销售日期</th>'+
       			'</tr></thead><tbody>' ;
       			
       			$('.ui-content').append(tb_1);	
       			
					//遍历该节点下的记录
					$.each(d,function(i, entry){
						 //处理单条发票购置记录的生成

						var tb_2=	
       		 	'<tr>'+
         		'<th>'+ entry.fpzl +'</th>'+
         		'<td>'+ entry.fppc +'</td>'+
         		'<td>'+ entry.jldw +'</td>'+
         		'<td>'+ entry.fpQshm +'</td>'+
         		'<td>'+ entry.fpZzhm +'</td>'+
         		'<td>'+ entry.sl +'</td>' +
         		'<td>'+ entry.xsRq +'</td>'+         		         		
       			'</tr>';

						$('.ui-content').append(tb_2);    
						//lv.append(tb_2);

					});//-- each

					var tb_3="</tbody></table>";
					$('.ui-content').append(tb_3);	
					
					lv.listview({ theme: "c" });//.listview("refresh");	
				},



				do:function(data){
							//获取值，调用子页生成函数

							PageBuilder.d5pop(data.TNsrfpgzqk);


				}
			};
	
		
	</script>
</head>
<body>
<div data-role="page" data-theme="c" id="demo-page" class="my-page2">

	<div data-role="header" data-position="fixed" data-tap-toggle="false"> 


		<div data-role="controlgroup" data-type="horizontal">
			<a href="t1-welcome.htm?user=someone" data-role="button" data-icon="logo-taxm" data-iconpos="notext" data-ajax="false">主屏</a>
				<a href="t2-search.htm" data-role="button"  data-ajax="false">一户式查询a>
        <a href="#left-panel" data-role="button" data-ajax="false" data-icon="bars" data-iconpos="notext">选项</a>

		</div>
		<h1 id="mytitle">演示页（必须发布到web服务器中才能正常浏览）</h1>
	<a href="javascript:alert('your device is offline...please check it out!')" rel="external" class="ui-btn-right" data-shadow="false" data-iconshadow="false" data-icon="grid" data-iconpos="right" data-ajax="false">联网更新</a>

	</div><!-- /header -->
	

<div data-role="content">
<p id="info">
	<a href="#" data-role="button" data-icon="info" data-iconpos="notext" data-theme="c" data-inline="true">Info</a>
	数据更新：
	<span>2012-01-01 14:00</span>
</p>

              
</div><!-- /content -->
    

</div><!-- /page -->
</body>
</html>
 